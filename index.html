<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tal√°ld ki az aj√°nd√©kom</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #ffffff;
      color: #000000;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
      padding: 16px;
      box-sizing: border-box;
      transition: background-color 0.3s, color 0.3s;
    }

    body.dark-mode {
      background-color: #121212;
      color: #eaeaea;
    }

    .game {
      background-color: #f0f0f0;
      padding: 24px 20px 28px;
      border-radius: 16px;
      width: 100%;
      max-width: 380px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.3);
      text-align: center;
      box-sizing: border-box;
    }

    body.dark-mode .game {
      background-color: #1c1c1c;
    }

    h2 { margin-bottom: 20px; }

    input, button {
      width: 100%;
      padding: 14px;
      margin-top: 12px;
      border-radius: 12px;
      font-size: 16px;
      box-sizing: border-box;
    }

    button {
      border: none;
      background: linear-gradient(135deg, #4facfe, #00f2fe);
      font-weight: bold;
      cursor: pointer;
    }

    #hintContainer { margin-top: 16px; font-style: italic; }
    #message { font-size: 1.5rem; margin-top: 16px; display: none; }
    #timer { font-size: 2.5rem; margin-top: 18px; display: none; }
    #winImage { width: 100%; margin-top: 18px; display: none; }

    #winVideo {
      width: 100%;
      aspect-ratio: 9 / 16;
      margin-top: 18px;
      border-radius: 12px;
      display: none;
      border: none;
    }
  </style>
</head>
<body>

<div class="game">
  <h2 id="title"></h2>
  <input id="guessInput" placeholder="Tippelj ide" onkeydown="handleEnter(event)">
  <button id="guessButton" onclick="checkGuess()">Tippel√©s</button>
  <button id="toggleDarkMode" onclick="toggleDarkMode()">Dark Mode</button>

  <div id="hintContainer"><b>Hint:</b> <span id="hint"></span></div>
  <div id="message"></div>
  <div id="timer"></div>

  <img id="winImage" alt="Gy≈ëzelem">
  <iframe id="winVideo" loading="lazy" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
  <button id="volumeToggle" style="display:none" onclick="toggleVolume()">üîá Hang be</button>
</div>

<script>
// J√ÅT√âK ADATOK
const games = [
  {
    answers: ["ferrari", "lewis hamilton", "f1"],
    hints: ["shitbox", "0 gy≈ëzelem", "legjobb pil√≥ta szerinted"],
    image: "https://upload.wikimedia.org/wikipedia/commons/3/3e/Lewis_Hamilton_2022.jpg",
    video: "https://www.youtube.com/embed/kl88LBlGyx4?playsinline=1&rel=0",
    showMedia: true
  },
  {
    answers: ["√°ram programoz√°s", "√°ramk√∂r", "circuit"],
    hints: ["R√©gen sokat j√°tszott√°l ezzel", "Nemr√©g besz√©lt√ºnk err≈ël", "√Åramk√∂r"],
    showMedia: false
  }
];

// √ÅLLAPOT
let currentGame = Number(localStorage.getItem("currentGame")) || 0;
let attempts = 0;
const unlockDate = new Date("2026-01-09T00:00:00");
let countdownInterval = null;

// ELEMEK
const input = document.getElementById("guessInput");
const button = document.getElementById("guessButton");
const hint = document.getElementById("hint");
const message = document.getElementById("message");
const timer = document.getElementById("timer");
const winImage = document.getElementById("winImage");
const winVideo = document.getElementById("winVideo");
const volumeToggle = document.getElementById("volumeToggle");
let isMuted = true;

// C√çM
const titleEl = document.getElementById("title");
titleEl.textContent = currentGame === 0 ? "Tal√°ld ki az aj√°nd√©kom!" : "M√°sodik kih√≠v√°s";

// F≈ê LOGIKA
function checkGuess() {
  const guess = input.value.toLowerCase().trim();

  if (games[currentGame].answers.includes(guess)) {
    message.textContent = "Eltal√°ltad!";
    message.style.display = "block";

    input.style.display = "none";
    button.style.display = "none";
    hint.textContent = "";

    if (games[currentGame].showMedia) {
      winImage.src = games[currentGame].image;
      winImage.style.display = "block";

      winVideo.src = games[currentGame].video + "&autoplay=1&mute=1";
      isMuted = true;
      volumeToggle.textContent = "üîä Hang be";
      volumeToggle.style.display = "block";
      winVideo.style.display = "block";
    }

    if (currentGame === 0) {
      setTimeout(startCountdown, 60000);
    }

  } else if (attempts < games[currentGame].hints.length) {
    hint.textContent = games[currentGame].hints[attempts];
    attempts++;
  }

  input.value = "";
}

function startCountdown() {
  message.style.display = "none";
  timer.style.display = "block";

  if (countdownInterval) clearInterval(countdownInterval);
  updateCountdown();
  countdownInterval = setInterval(updateCountdown, 1000);
}

function updateCountdown() {
  const diff = unlockDate - new Date();

  if (diff <= 0) {
    clearInterval(countdownInterval);
    localStorage.setItem("currentGame", "1");
    location.reload();
    return;
  }

  const d = Math.floor(diff / 86400000);
  const h = Math.floor(diff / 3600000) % 24;
  const m = Math.floor(diff / 60000) % 60;
  const s = Math.floor(diff / 1000) % 60;

  timer.textContent = `${d} nap ${h} √≥ra ${m} perc ${s} mp`;
}

function handleEnter(e) {
  if (e.key === "Enter") {
    checkGuess();
  }
}

function toggleDarkMode() {
  document.body.classList.toggle("dark-mode");
}

function toggleVolume() {
  if (!winVideo.src) return;
  isMuted = !isMuted;
  const base = games[currentGame].video;
  winVideo.src = base + `&autoplay=1&mute=${isMuted ? 1 : 0}`;
  volumeToggle.textContent = isMuted ? "üîä Hang be" : "üîá Hang ki";
}

// ADMIN CHEAT (Ctrl + Shift + R)
document.addEventListener("keydown", (e) => {
  if (e.ctrlKey && e.shiftKey && e.key.toLowerCase() === "r") {
    localStorage.clear();
    location.reload();
  }
});
</script>

</body>
</html>
